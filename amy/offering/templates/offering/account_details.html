{% extends "base_nav.html" %}

{% block content %}

<div class="edit-object">
  {% if perms.offering.change_account %}
    <a class="btn btn-primary" href="{% url 'account-update' object.pk %}">Edit</a>
  {% else %}
    <a class="btn btn-primary disabled" disabled href="#">Edit</a>
  {% endif %}
  <div class="float-right">
    {% if perms.offering.delete_account %}
    <form action="{% url 'account-delete' object.pk %}" onsubmit='return confirm("Are you sure you wish to remove this account?")' method="POST">
      {% csrf_token %}
      <button type="submit" class="btn btn-danger">Delete</button>
    </form>
    {% else %}
    <a class="btn btn-danger disabled" disabled href="#">Delete</a>
    {% endif %}
  </div>
</div>

<table class="table table-striped">
  <tr>
    <th>Account type:</th>
    <td>{{ object.account_type }}</td>
  </tr>
  <tr>
    <th>Object:</th>
    <td><a href="{{ object.generic_relation.get_absolute_url }}">{{ object.generic_relation }}</a></td>
  </tr>
  <tr>
    <th>Account owners:</th>
    <td>
      {% if owners %}
        <ol>
        {% for owner in owners %}
          <li>{{ owner.get_permission_type_display }}: <a href="{{ owner.person.get_absolute_url }}">{{ owner.person }}</a></li>
        {% endfor %}
        </ol>
      {% else %}
        <p>&mdash;</p>
      {% endif %}
      {% if object.account_type != "individual" %}
      <a href="{% url 'account-owners-update' object.pk %}">Edit</a>
      {% endif %}
    </td>
  </tr>
</table>

<h4>Partnerships:</h4>

{% include "offering/includes/partnerships.html" with object_list=partnerships %}

<h4>Linked account benefits:</h4>

{% include "offering/includes/account_benefits.html" with object_list=account_benefits show_partnership_column=True %}

<a href="{% url 'account-benefit-create' %}?account_pk={{ object.pk }}&next={{request.get_full_path|urlencode}}" class="btn btn-success">Add account benefit to this account</a>

{% endblock %}
