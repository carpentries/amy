{% extends "base_nav.html" %}

{% block content %}

{% if perms.emails.change_emailtemplate %}
<div class="edit-object">
  <div class="btn-group">
    <a class="btn btn-primary" href="{% url 'email_template_edit' email_template.id %}">Edit</a>
  </div>
  <div class="float-right">
    <a class="btn btn-danger" href="{% url 'email_template_delete' email_template.id %}">Delete</a>
  </div>
</div>
{% else %}
<div class="edit-object">
  <div class="btn-group">
    <a class="btn btn-primary disabled" disabled href="#">Edit</a>
  </div>
  <div class="float-right">
    <a class="btn btn-warning disabled" disabled href="#">Cancel</a>
  </div>
</div>
{% endif %}

<table class="table table-striped">
  <tr>
    <th width="20%">ID:</th>
    <td>{{ email_template.id }}</td>
  </tr>
  <tr>
    <th>Active:</th>
    <td><strong>{{ email_template.active|yesno }}</strong></td>
  </tr>
  <tr>
    <th>Created at:</th>
    <td>{{ email_template.created_at }}</td>
  </tr>
  <tr>
    <th>Last updated at:</th>
    <td>{{ email_template.last_updated_at }}</td>
  </tr>
  <tr>
    <th>Name:</th>
    <td>{{ email_template.name }}</td>
  </tr>
  <tr>
    <th>Signal:</th>
    <td><code>{{ email_template.signal }}</code></td>
  </tr>
  <tr>
    <th>From:</th>
    <td>{{ email_template.from_header }}</td>
  </tr>
  <tr>
    <th>Reply-To:</th>
    <td>{{ email_template.reply_to_header|default:"&mdash;" }}</td>
  </tr>
  <tr>
    <th>CC:</th>
    <td>
    {% if email_template.cc_header %}
      <ul>
      {% for email in email_template.cc_header %}
        <li>{{ email }}</li>
      {% endfor %}
      </ul>
    {% else %}
    &mdash;
    {% endif %}
    </td>
  </tr>
  <tr>
    <th>BCC:</th>
    <td>
    {% if email_template.bcc_header %}
      <ul>
      {% for email in email_template.bcc_header %}
        <li>{{ email }}</li>
      {% endfor %}
      </ul>
    {% else %}
    &mdash;
    {% endif %}
    </td>
  </tr>
  <tr>
    <th>Subject:</th>
    <td><code>{{ email_template.subject }}</code></td>
  </tr>
  <tr>
    <th>Body: <br><small>(Markdown; converts to HTML when sent)</small></th>
    <td>
      <pre>{{ email_template.body }}</pre>
    </td>
  </tr>
</table>

{% endblock %}
